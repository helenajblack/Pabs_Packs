<header ng-include="'/views/templates/header.html'"></header>
<div class="container" ng-init="ec.getEvents()">
  <div class="col-md-8">
        <div class="event-tracker">
          <h2>Event Tracker</h2>
            <!-- beginning of tabs -->
            <tabset>
              <!-- <h5 class="pull-right">View Events For
                <input type="date" id="date" value="Select Month" ng-model="ec.dateInput" class="pull-right">
              </h5> -->
              <!-- packs tab -->
              <tab heading="Donation Events">
                <div class="table-responsive">
                  <table class="table table-bordered table-hover">
                    <!-- header with sort -->
                    <thead>
                      <tr>
                        <th>
                          <a ng-click='ec.sortColumn1("event_date"); arrow = !arrow' ng-class='ec.sortClass1("event_date")'>Date
                            <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                            <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                          </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn1("event_time"); arrow = !arrow' ng-class='ec.sortClass1("event_time")'>Time
                            <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                            <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                          </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn1("partner_id"); arrow = !arrow' ng-class='ec.sortClass1("partner_id")'>Event Partner
                            <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                            <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                          </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn1("packs_promised"); arrow = !arrow' ng-class='ec.sortClass1("packs_promised")'>Packs Promised
                            <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                            <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                          </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn1("packs_needed"); arrow = !arrow' ng-class='ec.sortClass1("packs_needed")'>Packs Needed
                            <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                            <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                          </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn1("comments"); arrow = !arrow' ng-class='ec.sortClass1("comments")'>Comments
                            <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                            <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                          </a>
                        </th>
                        <th>Edit</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tr ng-repeat="events in ec.donationList | limitTo:ec.numPerPage:(ec.currentPage - 1) * ec.numPerPage">
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.event_date | date:"MM/dd/yyyy"}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="date" ng-model="ec.event_dateUpdate" placeholder="{{events.event_date | date:" MM/dd/yyyy "}}" value="{{events.event_date | date:" MM/dd/yyyy "}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.event_time}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="time" ng-model="ec.event_timeUpdate" placeholder="{{events.event_time}}" value="{{events.event_time}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.partner_id}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.partner_idUpdate" placeholder="{{events.partner_id}}" value="{{events.partner_id}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.packs_promised}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.packs_promisedUpdate" placeholder="{{events.packs_promised}}" value="{{events.packs_promised}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.packs_needed}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.packs_neededUpdate" placeholder="{{events.packs_needed}}" value="{{events.packs_needed}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.comments}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="text" ng-model="ec.commentsUpdate" placeholder="{{events.comments}}" value="{{events.comments}}"></thing>
                      </td>
                      <td>
                        <button class="btn btn-success" ng-hide="toggle[events.id]" ng-click="toggle[events.id] = !toggle[events.id]">Edit <i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>
                        <button ng-click="ec.updateDonationEvents(events.id)" ng-show="toggle[events.id]" class="btn btn-default">Update</button>
                      </td>
                      <td>
                        <button class="btn btn-danger" ng-click="ec.deleteEvent(events.id)"><i class="fa fa-times" aria-hidden="true"></i></button>
                      </td>
                    </tr>
                  </table>
                  <!-- pagination -->
                  <pagination total-items="ec.donationList.length" ng-model="ec.currentPage" class="pagination-sm" ng-change="ec.pageChanged()"></pagination>
                </div>

              </tab>
              <!-- end donation events -->

              <!-- begin packing events -->
              <tab heading="Packing Events" select="ec.getPacks()">
                <div class="table-responsive">
                  <table class="table table-bordered table-hover">
                    <!-- header with sort -->
                    <thead>
                      <tr>
                        <th>
                          <a ng-click='ec.sortColumn2("event_date"); arrow = !arrow' ng-class='ec.sortClass2("event_date")'>Date
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("event_time"); arrow = !arrow' ng-class='ec.sortClass2("event_time")'>Time
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("partner_id"); arrow = !arrow' ng-class='ec.sortClass2("partner_id")'>Event Partner
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("packs_made"); arrow = !arrow' ng-class='ec.sortClass2("packs_made")'>Packs Made
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("comments"); arrow = !arrow' ng-class='ec.sortClass2("comments")'>Comments
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>Edit</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tr ng-repeat="events in ec.packList | limitTo:ec.numPerPage:(ec.currentPage - 1) * ec.numPerPage">
                      <!-- ng-if="events.event_date > ec.now && events.event_type=='Packing'" -->
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.event_date | date:"MM/dd/yyyy"}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="date" ng-model="ec.event_dateUpdate" placeholder="{{events.event_date | date:" MM/dd/yyyy "}}" value="{{events.event_date | date:" MM/dd/yyyy "}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.event_time}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="time" ng-model="ec.event_timeUpdate" placeholder="{{events.event_time}}" value="{{events.event_time}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.partner_id}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.partner_idUpdate" placeholder="{{events.partner_id}}" value="{{events.partner_id}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.packs_promised}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.packs_promisedUpdate" placeholder="{{events.packs_promised}}" value="{{events.packs_promised}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.packs_needed}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.packs_neededUpdate" placeholder="{{events.packs_needed}}" value="{{events.packs_needed}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.comments}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="text" ng-model="ec.commentsUpdate" placeholder="{{events.comments}}" value="{{events.comments}}"></thing>
                      </td>
                      <td>
                        <button class="btn btn-success" ng-hide="toggle[events.id]" ng-click="toggle[events.id] = !toggle[events.id]">Edit <i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>
                        <button ng-click="ec.updateDonationEvents(events.id)" ng-show="toggle[events.id]" class="btn btn-default">Update</button>
                      </td>
                      <td>
                        <button class="btn btn-danger" ng-click="ec.deleteEvent(events.id)"><i class="fa fa-times" aria-hidden="true"></i></button>
                      </td>
                    </tr>
                  </table>
                  <!-- pagination -->
                  <pagination total-items="ec.packList.length" ng-model="ec.currentPage" class="pagination-sm" ng-change="ec.pageChanged()"></pagination>
                </div>

              </tab>
              <!-- end packing events tab -->

              <!-- past events tab -->
              <tab heading="Past Events" select="ec.getPast()">
                <div class="table-responsive">

                  <table class="table table-bordered table-hover">
                    <!-- header with sort -->
                    <thead>
                      <tr>
                        <th>
                          <a ng-click='ec.sortColumn2("event_date"); arrow = !arrow' ng-class='ec.sortClass2("event_date")'>Date
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("event_time"); arrow = !arrow' ng-class='ec.sortClass2("event_time")'>Time
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("partner_id"); arrow = !arrow' ng-class='ec.sortClass2("partner_id")'>Event Partner
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("packs_promised"); arrow = !arrow' ng-class='ec.sortClass2("packs_promised")'>Packs Promised
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("packs_needed"); arrow = !arrow' ng-class='ec.sortClass2("packs_needed")'>Packs Needed
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>
                          <a ng-click='ec.sortColumn2("comments"); arrow = !arrow' ng-class='ec.sortClass2("comments")'>Comments
                      <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                      <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
                    </a>
                        </th>
                        <th>Edit</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tr ng-repeat="events in ec.pastList | limitTo:ec.numPerPage:(ec.currentPage - 1) * ec.numPerPage">
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.event_date | date:"MM/dd/yyyy"}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="date" ng-model="ec.event_dateUpdate" placeholder="{{events.event_date | date:" MM/dd/yyyy "}}" value="{{events.event_date | date:" MM/dd/yyyy "}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.event_time}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="time" ng-model="ec.event_timeUpdate" placeholder="{{events.event_time}}" value="{{events.event_time}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.partner_id}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.partner_idUpdate" placeholder="{{events.partner_id}}" value="{{events.partner_id}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.packs_promised}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.packs_promisedUpdate" placeholder="{{events.packs_promised}}" value="{{events.packs_promised}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.packs_needed}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="number" ng-model="ec.packs_neededUpdate" placeholder="{{events.packs_needed}}" value="{{events.packs_needed}}"></thing>
                      </td>
                      <td>
                        <thing ng-hide="toggle[events.id]">{{events.comments}}</thing>
                        <thing ng-show="toggle[events.id]"><input type="text" ng-model="ec.commentsUpdate" placeholder="{{events.comments}}" value="{{events.comments}}"></thing>
                      </td>
                      <td>
                        <button class="btn btn-success" ng-hide="toggle[events.id]" ng-click="toggle[events.id] = !toggle[events.id]">Edit <i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>
                        <button ng-click="ec.updateDonationEvents(events.id)" ng-show="toggle[events.id]" class="btn btn-default">Update</button>
                      </td>
                      <td>
                        <button class="btn btn-danger" ng-click="ec.deleteEvent(events.id)"><i class="fa fa-times" aria-hidden="true"></i></button>
                      </td>
                    </tr>
                  </table>
                  <!-- pagination -->
                  <pagination total-items="ec.pastList.length" ng-model="ec.currentPage" class="pagination-sm" ng-change="ec.pageChanged()"></pagination>

                </div>
              </tab>
            </tabset>

        </div>
      </div>

      <div class="col-md-4">
        <div class="totals">

          <h2>TOTALS</h2>

          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                  <th>
                    <a ng-click='ec.sortColumn("event_date"); arrow = !arrow' ng-class='ec.sortClass("event_date")'>Needed Packs
                <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
              </a>
                  </th>
                  <th>
                    <a ng-click='ec.sortColumn("event_time"); arrow = !arrow' ng-class='ec.sortClass("event_time")'>Packs Currently Made
                <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
              </a>
                  </th>
                  <th>
                    <a ng-click='ec.sortColumn("partner_id"); arrow = !arrow' ng-class='ec.sortClass("partner_id")'>CTD Annual Packs Donated
                <thing ng-hide="arrow"><i class="fa fa-sort-desc" aria-hidden="true"></i></thing>
                <thing ng-show="arrow"><i class="fa fa-sort-asc" aria-hidden="true"></i></thing>
              </a>
                  </th>
                  <th>Edit</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tr ng-repeat="events in ec.events track by $index" ng-if="events.event_type=='Packing'">
                <td>
                  <thing ng-hide="toggle[events.id]">{{events.needed_packs}}</thing>
                  <thing ng-show="toggle[events.id]"><input type="text" ng-model="ec.event_neededPacksUpdate" placeholder="{{events.needed_packs }}" value="{{events.needed_packs}}"></thing>
                </td>
                <td>
                  <thing ng-hide="toggle[events.id]">{{events.event_time}}</thing>
                  <thing ng-show="toggle[events.id]"><input type="text" ng-model="ec.event_timeUpdate" placeholder="{{events.event_time}}" value="{{events.event_time}}"></thing>
                </td>
                <td>
                  <thing ng-hide="toggle[events.id]">{{events.partner_id}}</thing>
                  <thing ng-show="toggle[events.id]"><input type="text" ng-model="ec.partner_idUpdate" placeholder="{{events.partner_id}}" value="{{events.partner_id}}"></thing>
                </td>
                <td>
                  <button class="btn btn-success" ng-hide="toggle[events.id]" ng-click="toggle[events.id] = !toggle[events.id]">Edit <i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>
                  <button ng-click="ec.updatePackEvents(events.id)" ng-show="toggle[events.id]" class="btn btn-default">Update</button>
                </td>
                <td>
                  <button class="btn btn-danger" ng-click="ec.deleteEvent(events.id)"><i class="fa fa-times" aria-hidden="true"></i></button>
                </td>
              </tr>
            </table>
          </div>
          </tab>
        </div>
      </div>
  </section>

  <!-- modal -->
  <script type="text/ng-template" id="eventModal.html">
    <div class="modal-header">
      <div class='btn-toolbar pull-right'>
        <div class='btn-group'>
          <button class="btn" style="background-color:transparent;" ng-click="ec.cancel()"><i class="fa fa-times fa-lg" aria-hidden="true"></i></button>
        </div>
      </div>
      <h3 class="modal-title">New Item</h3>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-md-12">
          <!-- input forms -->
          <form>
            <div class="form-group">
              <label>Date:</label for="date">
                <input type="date" class="modalInput form-control" placeholder="Type your date here" id="date" ng-model="ec.event_date">
            </div>
            <div class="form-group">
              <label>Time:</label for="time">
                <input type="time" class="modalInput form-control" placeholder="Time" id="time" ng-model="ec.event_time">
            </div>
            <div class="form-group">
              <label>Partner Id:</label for="numberOnHand">
                <input type="number" class="modalInput form-control" placeholder="Partner Id" id="numberOnHand" ng-model="ec.partner_id">
            </div>
            <div class="form-group">
              <label>Comments:</label for="comments">
                <input type="text" class="modalInput form-control" placeholder="Comments" id="comments" ng-model="ec.comments">
            </div>
            <div class="form-group">
              <label>Packs Needed:</label for="packsNeeded">
                <input type="number" class="modalInput form-control" placeholder="Packs Needed" id="packsNeeded" ng-model="ec.packs_needed">
            </div>
            <div class="form-group">
              <label>Packs Promised:</label for="packsPromised">
                <input type="number" class="modalInput form-control" placeholder="Packs Promised" id="packsPromised" ng-model="ec.packs_promised">
            </div>
            <!-- radio buttons -->
            <div class="form-group">
              <label>Type of Event:</label for="eventType">
                <select label="-- Select option --" class="form-control input100" id="eventType" ng-model="ec.event_type" placeholder="What type of event?">
                  <option value="" selected disabled><span class="selectlabel">What type of event?</span></option>
                  <option class="form-control input-lg input100" value="Donation">Donation Event</option>
                  <option class="form-control input-lg input100" value="Packing">Packing Event</option>
                </select>
            </div>

          </form>
        </div>
      </div>
    </div>
<!-- post button -->
      <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ec.createEvent()">Create</button>
      </div>
    </script>
<!-- end modal -->

<button class="btn btn-info" ng-click="ec.openAddNew()">Add New <i class="fa fa-plus" aria-hidden="true"></i></button>

</div>
